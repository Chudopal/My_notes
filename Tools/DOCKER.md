# Docker
**Програмное обеспечение предназначенное для запуска приложеений в их окружениях, изолируя их от системы и других приложений**

+ [Основные понятия](#main_def)
+ [Dockerfile](#dockerfile)
+ [Основные комманды](#main_comm)
### <a name="main_def"></a> Основные понятия
+ **Образ** - шаблоны при помощи которых запускаются докеризированные приложения. Изменять их нельзя, можно только наращивать слои. На основе образа можно запустить контейнеры, в которых будет работать изолированная программа.
+ **Контейнер** - **запущенный образ**, изолированная среда, в которой запущенно приложение. Контейнер обладает все теме же свойствами, что и ОС: в нем есть, например, файловая система, которою можно именять, по которой можно перемещаться, используя стандартные команды ОС. Находясь в контейнере приложение не способно повлиять на ОС и на другие приложения. Контейнер обладает следующими свойствами:
    1. В нем можно что-то хранить. Можно это хранить либо в контейнере либо за его пределами;
    2. Его можно переносить;
    3. У контейнера есть порты, которые позволяют ему взаимодействовать с внешним миром;


### <a name="dockerfile"> </a> Dockerfile
+ **Dockerfile** - файл, в котором содержится набор инструкций, по которым Docker будет собирать образ контейнера. В образ контейнера, поверх базового образа, можно добавлять дополнительные слои. Делается это в соответствии с инструкциями из Dockerfile. 
+ Чтобы запустить докер-контейнер, нужно запустить образ:
    ```docker
    docker run image_id
    ```
+ Синтаксис (все команды в dockerfile принято указывать заглавными буквами — к примеру RUN, CMD и т.д.):
    + Каждый dockderfile начинается с инструкции `FROM`, которая определяет базовый образ. Это может быть любой образ, в том числе и созданные вами до этого. Если указанный вами образ не найден на хосте, Докер попытается найти и скачать его:
        ```docker
        # создаем базовый пайтон контейнер
        FROM python:3.7-alpine
        ```
    + `ADD` - команда, которая позволяет копировать ресурс в контейнер. Это может быть файл, папка или интернет-страница. Первый аргумент - путь к ресурсу для копирования, второй аргумент - путь в контейнере, куда копировать:
        ```docker
        # Синтаксис команды: ADD [исходный путь или URL] [путь назначения]
        ADD /my_merionet_app /my_merionet_app
        ```
    + `RUN` - команда для исполнения скриптов. Она берет команду как аргумент и запускает ее из образа:
        ```docker
        # Print «Hello from Merionet!»
        RUN echo «Hello from Merionet!!»
        ```
    + `CMD` - похожа на `RUN`. RUN фактически запускает команду и фиксирует результат; CMD ничего не выполняет во время сборки, но указывает предназначенную команду для образа.
    RUN позволяет выполнять команды внутри вашего docker-образа — такие команды выполняются только один раз во время сборки и создают новый слой в итоговом docker-образе.
    Инструкция CMD позволяет определить команду по умолчанию, которая будет выполняться при запуске вашего docker-контейнера. *Эта инструкция не выполняется во время сборки!*:
        ```docker
        # Синтаксис команды: CMD %приложение%  «аргумент», «аргумент», ..
        CMD «echo» «Hello from Merionet!».
        ```
     + `ENTRYPOINT` - предоставляет команду с аргументами для вызова во время выполнения контейнера. Аргументы не переопределяются.
        ```docker
        #Синтаксис команды: ENTRYPOINT %приложение% «аргумент» 
        # Учтите, что аргументы опциональны — они могут быть предоставлены командой CMD или #во время создания контейнера.
        ENTRYPOINT echo

        #Синтаксис команды совместно с CMD:
        CMD «Hello from Merionet!»
        ENTRYPOINT echo
        ```
     + `ENV` - устанавливает постоянные переменные среды:
        ```docker
        # Синтаксис команды:  ENV %ключ% %значение%
        ENV BASH /bin/bash
        ```
     + `EXPOSE` - открывает порт в контейнере. Контейнеры могут подключаться к внешнему миру без какой-либо конфигурации. Но внешний мир не может подключиться к контейнеру по умолчанию. Если в контейнере, например, задействован 80-й порт, то он не будет доступен из системы, для этого его необходимо открыть. Команда EXPOSE используется для привязки определенного порта для реализации сетевой связности между процессом внутри контейнера и внешним миром — хостом.:
        ```docker
        # Синтаксис команды:  EXPOSE %номер_порта%
        EXPOSE 8080
        ```
     + Команда `VOLUME` — данная команда используется для организации доступа вашего контейнера к директории на хосте (создаёт точку монтирования для работы с постоянным хранилищем):
        ```docker
        # Синтаксис команды:  VOLUME [«/dir_1», «/dir2» ...]
        VOLUME [«/home»]
        ```
     + Команда `WORKDIR` указывает директорию, из которой будет выполняться команда CMD:
        ```docker
        # Синтаксис команды:  WORKDIR /путь
        WORKDIR ~/
        ```


 
### <a name="main_comm"></a>Основные комманды 
+ `docker ps` - показать активные(работающие в данный момент) контейнеры:
    + `-a` - показать все контейнеры
    + `-q` - показать только id контейнеров
+ `docker pull <name>` - скачать готовый образ (`docker pull debian` - скачать образ дебиан)
+ `docker build [] <path>` - собрать образ при помощи dockerfile:
    + `-t` - задает имя образа
+ `docker run <name>`-запускает контейнер на основе образа
+ `dcoker logs [] <id>` - показывает логи внутри какого-то контейнера:
    + `-f` - показывает логи в реальном времени 
+ `decker exec <id>` - выполнить команду внутри контейнера
